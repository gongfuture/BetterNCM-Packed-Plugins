# BetterNCM - Plugin Library

æœ¬ Repo æ˜¯ BetterNCM çš„æ’ä»¶åº“

## ğŸ¤– è‡ªåŠ¨åŒæ­¥è¯´æ˜

æœ¬ä»“åº“ç°åœ¨æ”¯æŒè‡ªåŠ¨åŒæ­¥åŠŸèƒ½ï¼æˆ‘ä»¬çš„GitHub Actionså·¥ä½œæµä¼šï¼š

- æ¯6å°æ—¶è‡ªåŠ¨æ£€æŸ¥[æºä»“åº“](https://github.com/BetterNCM/BetterNCM-Plugins)çš„`plugins-data`ç›®å½•æ˜¯å¦æœ‰æ›´æ–°
- å½“æ£€æµ‹åˆ°æ›´æ–°æ—¶ï¼Œè‡ªåŠ¨æ‰§è¡Œæ‰“åŒ…å¹¶åŒæ­¥åˆ°æœ¬ä»“åº“
- ä¿æŒä¸å®˜æ–¹ä»“åº“çš„æ’ä»¶æ•°æ®åŒæ­¥

### ç›‘æ§çŠ¶æ€
å¯ä»¥åœ¨[Actionsé¡µé¢](../../actions)æŸ¥çœ‹è‡ªåŠ¨åŒæ­¥çš„è¿è¡ŒçŠ¶æ€å’Œæ—¥å¿—ã€‚

### æ‰‹åŠ¨è§¦å‘
å¦‚éœ€ç«‹å³åŒæ­¥ï¼Œå¯åœ¨Actionsé¡µé¢æ‰‹åŠ¨è¿è¡Œ"Sync and Pack Plugins"å·¥ä½œæµã€‚

### æœ¬åœ°å·¥å…·
- `./check-status.sh` - æ£€æŸ¥å½“å‰åŒæ­¥çŠ¶æ€
- `./test-sync.sh` - æµ‹è¯•åŒæ­¥é€»è¾‘

è¯¦ç»†è¯´æ˜è¯·å‚è€ƒ [WORKFLOW_README.md](WORKFLOW_README.md)ã€‚

## æ’ä»¶æäº¤åŠæ›´æ–°

0. ç¡®è®¤ä½ çš„æ’ä»¶ç¬¦åˆ[ä¸Šæ¶å‡†åˆ™](https://github.com/MicroCBer/BetterNCM/wiki/%E6%8F%92%E4%BB%B6%E5%95%86%E5%BA%97%E4%B8%8A%E6%9E%B6%E6%8F%92%E4%BB%B6%E6%96%B9%E5%BC%8F%E5%8F%8A%E5%87%86%E5%88%99#%E4%B8%8A%E6%9E%B6%E5%87%86%E5%88%99)
1. Fork æœ¬ä»“åº“
2. åœ¨ `plugins-list` ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª JSON æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹

```js
{
    "name": "ExamplePlugin", // æ’ä»¶å
    "repo": "BetterNCM/example-plugin", // æ’ä»¶çš„ Repo
    "branch": "main", // åˆ†æ”¯å
    "subpath": "/", // æ’ä»¶åœ¨ repo ä¸­çš„å­ç›®å½• ï¼ˆå¯é€‰ï¼‰
    "author": "Author" // ä½œè€…
}
```

3. æäº¤ PR
4. è„šæœ¬ä¼šå®šæ—¶æŠ“å–æ’ä»¶ Manifest ä¸­çš„ç‰ˆæœ¬å·ï¼Œå¹¶è‡ªåŠ¨æäº¤æ›´æ–°åŠå®¡æ ¸ã€‚ä½ è¿˜å¯ä»¥åœ¨ QQ ç¾¤ä¸­å‘é€ `update` ä»¥æ‰‹åŠ¨è§¦å‘æŠ“å–è„šæœ¬ã€‚
5. 
![image](https://user-images.githubusercontent.com/66859419/226158790-c6d3a57e-9ea3-4337-9a91-373838e83cc0.png)


## æ³¨æ„

+ è¯·ç¡®ä¿è¦åŒæ­¥åˆ°æ­¤ä»“åº“çš„æ’ä»¶ç›®å½•ä¸­ï¼Œæ²¡æœ‰å¤šä½™çš„æ–‡ä»¶ï¼ˆé™¤äº†æ’ä»¶è¿è¡Œæ‰€å¿…é¡»çš„æ–‡ä»¶å’Œæ’ä»¶é¢„è§ˆå›¾ï¼‰ã€‚
+ æˆ–è€…åˆ›å»º .betterncm-ignore æ–‡ä»¶æ¥è¿‡æ»¤ä¸éœ€è¦çš„æ–‡ä»¶ï¼ˆæ ¼å¼ç±»ä¼¼ .gitignoreï¼‰ã€‚
+ è¯·å‹ç¼©é¢„è§ˆå›¾ï¼Œä¿è¯é¢„è§ˆå›¾ä¸è¦è¿‡å¤§
+ Native æ’ä»¶å¿…é¡»ä½¿ç”¨ GitHub Action ç¼–è¯‘ã€‚

## Manifest.json æ ¼å¼

```js
{
    "manifest_version": 1, // manifest ç‰ˆæœ¬ï¼Œå¿…ä¸º 1
    "name": "ExamplePlugin", // æ’ä»¶å
    "slug": "example-plugin", // æ’ä»¶å”¯ä¸€è¯†åˆ«åï¼ˆè‹±æ–‡ã€æ•°å­—ã€æ¨ªæ ä¸ä¸‹åˆ’çº¿ï¼‰ (ç•™ç©ºåˆ™æ ¹æ®æ’ä»¶åè‡ªåŠ¨ç”Ÿæˆ)ï¼ˆå¦‚æœæ’ä»¶åæœ‰ä¸­æ–‡è¯·å¡«å†™è¯¥å­—æ®µï¼‰
    "version": "0.1.0", // æ’ä»¶ç‰ˆæœ¬ï¼Œæ¨èä½¿ç”¨è¯­ä¹‰åŒ–ç‰ˆæœ¬ï¼ˆhttps://semver.org/ï¼‰
    "betterncm_version": ">=1.0.0", // ä¾èµ–çš„ BetterNCM ç‰ˆæœ¬
    "author": "Author", // æ’ä»¶ä½œè€…
    "author_link": "https://example.com", // ä½œè€…é“¾æ¥ï¼ˆå¯é€‰ï¼‰
    "description": "Description of the plugin", // æ’ä»¶æè¿°
    "preview": "preview.png", // æ’ä»¶é¢„è§ˆå›¾
    "type": "extension", // æ’ä»¶ç±»å‹ï¼ˆå¯é€‰ï¼‰ï¼šextension (é»˜è®¤) | theme | dependency"
    "requirements": ["example-dependency"], // ä¾èµ–çš„æ’ä»¶ Slugï¼ˆå¯é€‰ï¼‰
    "force-install": false, // å¼ºåˆ¶å®‰è£…ï¼ˆéœ€è¦åœ¨å®¡æ ¸ä¸­å‘ŠçŸ¥ç†ç”±ï¼‰
    "force-update": "< 0.1.0", // å¼ºåˆ¶æ›´æ–°ï¼ˆå¦‚æ­¤å¤„å¼ºåˆ¶æ›´æ–°ç‰ˆæœ¬å· < 0.1.0 çš„ç‰ˆæœ¬åˆ°æœ€æ–°ï¼‰
    "force-uninstall": false, // å¼ºåˆ¶å¸è½½ï¼ˆé€‚ç”¨äºæ’ä»¶å´©äº†çš„æƒ…å†µï¼‰
    "ncm3-compatible": true, // æ˜¯å¦å…¼å®¹ç½‘æ˜“äº‘ 3.0.0+ ç‰ˆæœ¬

    "injects": { // æ™®é€šæ³¨å…¥
        "Main": [  // ç½‘æ˜“äº‘ä¸»é¡µé¢
            {
                "file": "main.js"  // éœ€æ³¨å…¥çš„æ–‡ä»¶
            }
        ]
    },
    "hijacks": {  // ç½‘æ˜“äº‘è¯·æ±‚ä¿®æ”¹ï¼ˆå¯é€‰ï¼‰
        "> 2.10.0 <= 2.10.6": {  // ç‰ˆæœ¬ï¼Œæ”¯æŒRange
            "orpheus://orpheus/pub/core.e5842f1.js": { // URLï¼Œå¼€å¤´éƒ¨åˆ†åŒ¹é…å³å¯
            //(å¦‚ orpheus://orpheus/pub/core.e5842f1.js?abcdefg å°†è¢«åŒ¹é…åˆ°)

                "type":"replace", // ç±»å‹ï¼Œç›®å‰æ”¯æŒ replace å’Œ regex
                "from":"var o;if(((this.U()||C).from||C).id==t)", // æœç´¢é¡¹
                "to":";expose(a);var o;if(((this.U()||C).from||C).id==t)" // æ›¿æ¢ä¸º
            }
        }
    },
    "native_plugin": "native.dll", // éœ€è¦æ³¨å…¥çš„ native dll ï¼ˆå¯é€‰ï¼‰ï¼ˆæ¥å£å‚è€ƒæ–‡æ¡£åŠå·²æœ‰ native æ’ä»¶ï¼‰
}
```
